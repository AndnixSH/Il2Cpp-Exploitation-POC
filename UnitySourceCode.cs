using System.Collections;
using System.Collections.Generic;
using Random = System.Random;
using UnityEngine.UI;
using System.Text;
using UnityEngine;

[System.Serializable]
public class Test : MonoBehaviour {
    
    private static Random rand = new Random();
    private ValueHolder holder;
    public GameObject GitButton;
    public GameObject GetButton;
    public GameObject ChangeButton;
    public GameObject Log;
    
    // Start is called before the first frame update
    void Start() {
        holder = new ValueHolder();
        GetButton.GetComponent<Button>().onClick.AddListener(() => GetValues());
        ChangeButton.GetComponent<Button>().onClick.AddListener(() => ChangeValues());
        GitButton.GetComponent<Button>().onClick.AddListener(() => VisitGit());
    }
    
    public void VisitGit() {
       Application.OpenURL("https://github.com/acessors/Il2Cpp-Exploitation-POC");
    }
    
    public void GetValues() {
        Log.GetComponent<Text>().text = string.Format("Int: {0}\nFloat: {1}\nBool: {2}\nString: {3}", holder.getInt(), 
        holder.getFloat(), holder.getBool(), holder.getString());
    }
    
    public void ChangeValues() {
        holder.addToInt(rand.Next(1, 6));
        holder.setString("Crack me! XD" + " " + randStr(5));
    }
    
    private static string randStr(int size) {
        string charset = "QWERTYUIOPASDFGHJKLZXCVBNM";
        StringBuilder buff = new StringBuilder();
        for (int i = 0; i < size; i++) {
            buff.Append(charset[rand.Next(0, charset.Length-1)]);
        }
        return buff.ToString();
    }

    // Update is called once per frame
    void Update() {
        
    }
}

class ValueHolder {
    
    private int v_int;
    private float v_float;
    private bool v_bool;
    private string v_string;
    
    public ValueHolder() {
        v_float = 2.5F;
        v_int = 25;
        v_bool = true;
        v_string = "Crack me! XD";
    }
    
    public bool getBool() {
        return this.v_bool;
    }
    
    public void addToInt(int val) {
        this.v_int+=val;
    }
    
    public void reverseBool() {
        this.v_bool = !this.v_bool;
    }
    
    public int getInt() {
        return this.v_int;
    }
    
    public float getFloat() {
        return this.v_float;
    }
    
    public void setString(string str) {
        this.v_string = str;
    }
    
    public string getString() {
        return this.v_string;
    }
}
